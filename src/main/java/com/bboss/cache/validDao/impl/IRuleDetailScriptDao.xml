<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bboss.cache.validDao.interfaces.IRuleDetailScriptDao">
    <resultMap id="BaseResultMap" type="com.bboss.cache.bean.valid.RuleDetailScript">
        <result column="script_name" jdbcType="VARCHAR" property="scriptName"/>
        <result column="rule_detail_id" jdbcType="VARCHAR" property="ruleDetailId"/>
        <result column="combination_key" jdbcType="VARCHAR" property="combinationKey"/>
        <result column="script_content" jdbcType="VARCHAR" property="scriptContent"/>
        <result column="script_type" jdbcType="INTEGER" property="scriptType"/>
        <result column="script_status" jdbcType="INTEGER" property="scriptStatus"/>
        <result column="description" jdbcType="VARCHAR" property="description"/>
        <result column="display_order" jdbcType="INTEGER" property="displayOrder"/>
        <result column="create_num" jdbcType="VARCHAR" property="createNum"/>
        <result column="create_time" jdbcType="TIMESTAMP" property="createTime"/>
        <result column="update_num" jdbcType="VARCHAR" property="updateNum"/>
        <result column="update_time" jdbcType="TIMESTAMP" property="updateTime"/>
    </resultMap>

    <sql id="Base_Column_List">
        script_name,
        rule_detail_id,
        combination_key,
        script_content,
        script_type,
        script_status,
        description,
        display_order,
        create_num,
        create_time,
        update_num,
        update_time
    </sql>

    <insert id="insert" parameterType="com.bboss.cache.bean.valid.RuleDetailScript">
        insert into rule_detail_script (<include refid="Base_Column_List"/>)
        values (
                #{scriptName}, #{ruleDetailId}, #{combinationKey}, #{scriptContent}, #{scriptType},
                #{scriptStatus}, #{description}, #{displayOrder}, #{createNum}, #{createTime},
                #{updateNum}, #{updateTime}
               )
    </insert>

    <insert id="batchInsert" parameterType="com.bboss.cache.bean.valid.RuleDetailScript">
        insert into rule_detail_script (<include refid="Base_Column_List"/>) values
        <foreach collection="list" item="item" index="index" separator=",">
            (
            #{item.scriptName}, #{item.ruleDetailId}, #{item.combinationKey}, #{item.scriptContent}, #{item.scriptType},
            #{item.scriptStatus}, #{item.description}, #{item.displayOrder}, #{item.createNum}, #{item.createTime},
            #{item.updateNum}, #{item.updateTime}
            )
        </foreach>
    </insert>

    <delete id="deleteRuleDetailScript" parameterType="java.lang.String">
        delete from rule_detail_script
        where script_name = #{scriptName}
    </delete>

    <select id="queryRuleDetailScriptById" resultType="com.bboss.cache.bean.valid.RuleDetailScript">
        select
        <include refid="Base_Column_List"/>
        from rule_detail_script
        where script_status = '1'
        and rule_detail_id = #{ruleDetailId}
        order by display_order
    </select>

    <select id="queryRuleDetailScriptByKey" resultType="com.bboss.cache.bean.valid.RuleDetailScript">
        select
        <include refid="Base_Column_List"/>
        from rule_detail_script
        where script_status = '1'
        and combination_key = #{combinationKey}
        order by display_order
    </select>

    <update id="updateRuleDetailScript" parameterType="com.bboss.cache.bean.valid.RuleDetailScript">
        update rule_detail_script
        set script_name = #{scriptName},
        combination_key = #{combinationKey},
        script_content = #{scriptContent},
        script_type = #{scriptType},
        script_status = #{scriptStatus},
        description = #{description},
        display_order = #{displayOrder}
        where script_name = #{scriptName}
    </update>
</mapper>
